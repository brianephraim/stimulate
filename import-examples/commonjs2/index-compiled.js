(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("stimulate",[],e):"object"==typeof exports?exports.stimulate=e():t.stimulate=e()}(this,function(){return function(t){function e(s){if(n[s])return n[s].exports;var i=n[s]={exports:{},id:s,loaded:!1};return t[s].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(8)},,,,,,,,function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.caf=e.raf=e.sharedTiming=e.easings=e.stimulate=void 0;var i=n(9),r=s(i),a=n(14),o=s(a),u=n(10);e.stimulate=r["default"],e.easings=o["default"],e.sharedTiming=u.sharedTiming,e.raf=u.raf,e.caf=u.caf,e["default"]=r["default"]},function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.StimulationAspect=e.stimulate=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),o=n(10),u=s(o),l=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?"root":arguments[1],s=arguments[2];i(this,t),this.parent=s,this.debug=n,this.options=e,this.init()}return a(t,[{key:"init",value:function(e){var n=this;this.aspects={},this.persistedSettings||(this.persistedSettings={}),this.inheritableDefaults={duration:1e3,delay:0,delayEveryLoop:!1,loop:!1,skipZeroFrame:!0,endless:!1,reverse:!1,usePersistedSettings:!1},this.defaultSettings={delayAddsParentDelay:!1,from:0,to:1,easing:null,aspects:this.aspects,frame:null,chainedStop:!0},this.settings=r({},this.defaultSettings,this.options),this.lookupSetting("usePersistedSettings")&&Object.assign(this.settings,this.persistedSettings),this.aspects=this.settings.aspects,this.parent?this.aspectTree=this.parent.aspectTree:this.aspectTree=this;var s=!!this.lookupSetting("reverse");this.previousReverseSetting=s;var i=this.getProgressDefault(s);this.progress?Object.assign(this.progress,i):(this.progress=i,this.progress.aspects={}),this.currentLoopCount=1,this.lastDelaySettingWhileDelaying=null,this.running=!0,this.nextRafId=null,this.timestamps={},u["default"].makeStamp("start"),this.timestamps.start=u["default"].stamps.start,this.timestamps.recentRaf=null,this.iterateAspectNames(function(s){e?n.aspects[s].init(!0):(n.aspects[s]=new t(r({},n.settings.aspects[s]),s,n),n.progress.aspects[s]=n.aspects[s].progress)});var a=this.lookupSetting("skipZeroFrame");this.recurse(!a)}},{key:"getCumulativeDelay",value:function(){var t=this.lookupSetting("delay");return this.parent&&this.settings.delayAddsParentDelay&&(t+=this.parent.getCumulativeDelay()),t}},{key:"updateSettings",value:function(t){return this.lookupSetting("usePersistedSettings")&&Object.assign(this.persistedSettings,t),Object.assign(this.settings,t),this}},{key:"lookupSetting",value:function(t){return"undefined"!=typeof this.settings[t]&&"inherit"!==this.settings[t]?this.settings[t]:this.parent?this.parent.lookupSetting(t):this.inheritableDefaults[t]}},{key:"iterateAspectNames",value:function(t){this.settings.aspectNames=Object.keys(this.settings.aspects),this.settings.aspectNames.forEach(function(e){t(e)})}},{key:"getProgressDefault",value:function(t){return t?{ratioCompleted:1,easedRatioCompleted:1,tweened:this.settings.to,easedTweened:this.settings.to}:{ratioCompleted:0,easedRatioCompleted:0,tweened:this.settings.from,easedTweened:this.settings.from}}},{key:"getTween",value:function(t,e,n){return t+n*(e-t)}},{key:"calculateRatio",value:function(t){var e=t.start+t.delay,n=t.later-e,s=n/t.duration;return s}},{key:"recurse",value:function(t,e){var n=this;this.running&&(this.nextRafId=u["default"].raf(function(){if(n.running){n.timestamps.recentRaf=u["default"].stamps.raf,t&&(n.timestamps.start=n.timestamps.recentRaf);var s=!!n.lookupSetting("reverse"),i=s?-1:1,r=n.previousReverseSetting!==s;n.previousReverseSetting=s,e&&Object.assign(n.progress,n.getProgressDefault(s));var a=0;a=null!==n.lastDelaySettingWhileDelaying?n.lastDelaySettingWhileDelaying:n.getCumulativeDelay();var o=n.lookupSetting("duration"),l=n.calculateRatio({start:n.timestamps.start,later:n.timestamps.recentRaf,delay:a,duration:o}),c=n.lookupSetting("delayEveryLoop");if(l>0&&l<1&&null===n.lastDelaySettingWhileDelaying&&(n.lastDelaySettingWhileDelaying=a,(!n.lookupSetting("skipZeroFrame")&&a&&n.currentLoopCount<=1||a&&c&&n.currentLoopCount>1)&&(n.timestamps.start=n.timestamps.recentRaf-a,l=n.calculateRatio({start:n.timestamps.start,later:n.timestamps.recentRaf,delay:a,duration:o}))),r){null===n.lastDelaySettingWhileDelaying&&(n.currentLoopCount--,n.progress.ratioCompleted=-i*(1+(-i*n.progress.ratioCompleted+a/o)));var p=n.progress.ratioCompleted;s&&(p=1-n.progress.ratioCompleted);var f=p*o,h=n.timestamps.recentRaf-f;n.timestamps.start=h-a,l=n.calculateRatio({start:n.timestamps.start,later:n.timestamps.recentRaf,delay:a,duration:o})}s&&(l=1-l);var d=n.lookupSetting("loop"),g=1,m=l<g,v=n.settings.from,y=n.settings.to;s&&(g=0,m=l>g);var w=!1,S=!1,k=!1,C=n.progress;if(C.ratioCompleted=l,m||!o||n.lookupSetting("endless"))n.settings.easing?C.easedRatioCompleted=n.settings.easing(C.ratioCompleted):C.easedRatioCompleted=C.ratioCompleted,C.tweened=n.getTween(v,y,C.ratioCompleted),C.easedTweened=n.getTween(v,y,C.easedRatioCompleted);else{var b=d===!0||d&&n.currentLoopCount<d;b&&!c?(C.ratioCompleted=-i+l,n.timestamps.start=n.timestamps.start+o,n.settings.easing?C.easedRatioCompleted=n.settings.easing(C.ratioCompleted):C.easedRatioCompleted=C.ratioCompleted,C.tweened=n.getTween(v,y,C.ratioCompleted),C.easedTweened=n.getTween(v,y,C.easedRatioCompleted),S=!0):(C.ratioCompleted=g,C.easedRatioCompleted=g,C.tweened=y,C.easedTweened=y,s&&(C.tweened=v,C.easedTweened=v)),b?(n.currentLoopCount++,k=!S,n.lastDelaySettingWhileDelaying=null):w=!0}var T=n.progress.ratioCompleted>=0;if(s&&(T=n.progress.ratioCompleted<=1),n.settings.frame&&T){var R=n.settings.frame.apply(n,[n.progress]);Object.assign(n.progress,R)}w?(n.running=!1,n.settings.onComplete&&n.settings.onComplete.apply(n,[n.progress])):n.recurse(k,k)}}))}},{key:"resetAll",value:function(){return this.stop(!0),this.init(!0),this}},{key:"stop",value:function(t){var e=this;return this.running=!1,u["default"].caf(this.nextRafId),this.settings.onStop&&(t||this.settings.onStop.apply(this,[this.progress])),this.iterateAspectNames(function(n){var s=e.aspects[n];s.settings.chainedStop&&e.aspects[n].stop(t)}),this}},{key:"resume",value:function(){var t=this;if(!this.running){u["default"].makeStamp("start");var e=this.lookupSetting("duration"),n=this.lookupSetting("reverse"),s=this.progress.ratioCompleted*e;n&&(s=(1-this.progress.ratioCompleted)*e),this.lastDelaySettingWhileDelaying&&(s+=this.lastDelaySettingWhileDelaying),this.timestamps.start=u["default"].stamps.start-s,this.timestamps.recentRaf=null,this.running=!0,this.iterateAspectNames(function(e){t.aspects[e].resume()}),this.recurse()}return this}},{key:"birthAspect",value:function(e,n){return this.aspects[e]&&this.aspects[e].stop(),this.aspects[e]=new t(r({},n),e,this),this.aspects[e]}},{key:"progressAt",value:function(t){var e=t.split("."),n=e[e.length-1];"undefined"==typeof this.progress[n]&&(n="easedTweened",e.push(n));var s=this.aspectTree;if(t)try{e.forEach(function(t){s=t!==n?s.aspects[t]:s.progress[t]})}catch(i){throw new Error("Error: You specified an invalid aspect path for .progressAt().")}else s=s.progress[n];return s}},{key:"aspectAt",value:function(t){var e=t.split("."),n=this.aspectTree;if(t)try{e.forEach(function(t){n=n.aspects[t]})}catch(s){throw new Error("Error: You specified an invalid aspect path for .aspectAt().")}return n}}]),t}(),c=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(l,[null].concat(e)))};e.stimulate=c,e.StimulationAspect=l,e["default"]=c},function(t,e,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){return p.raf.apply(p,arguments)}function a(){return p.caf.apply(p,arguments)}Object.defineProperty(e,"__esModule",{value:!0}),e.caf=e.raf=e.sharedTiming=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),u=n(11),l=s(u),c=function(){function t(){i(this,t),this.running={count:0,limit:0},this.stamps={start:null,raf:null},this.rafIdRegistry={}}return o(t,[{key:"makeStamp",value:function(t,e){return this.stamps[t]&&!e||(this.stamps[t]=Date.now()),this.stamps[t]}},{key:"raf",value:function(t){var e=this;this.running.count?this.running.count++:this.running.count=1;var n=(0,l["default"])(function(){delete e.rafIdRegistry[n],e.stamps.start=null,e.running.limit||(e.running.limit=e.running.count,e.makeStamp("raf",!0),e.running.count=0),e.running.limit--,t()});return this.rafIdRegistry[n]=!0,n}},{key:"caf",value:function(t){t&&this.rafIdRegistry[t]&&((0,u.cancel)(t),this.stamps.start=null,this.running.count--,delete this.rafIdRegistry[t])}}]),t}(),p=new c;e.sharedTiming=p,e.raf=r,e.caf=a,e["default"]=p},function(t,e,n){(function(e){for(var s=n(12),i="undefined"==typeof window?e:window,r=["moz","webkit"],a="AnimationFrame",o=i["request"+a],u=i["cancel"+a]||i["cancelRequest"+a],l=0;!o&&l<r.length;l++)o=i[r[l]+"Request"+a],u=i[r[l]+"Cancel"+a]||i[r[l]+"CancelRequest"+a];if(!o||!u){var c=0,p=0,f=[],h=1e3/60;o=function(t){if(0===f.length){var e=s(),n=Math.max(0,h-(e-c));c=n+e,setTimeout(function(){var t=f.slice(0);f.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(c)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return f.push({handle:++p,callback:t,cancelled:!1}),p},u=function(t){for(var e=0;e<f.length;e++)f[e].handle===t&&(f[e].cancelled=!0)}}t.exports=function(t){return o.call(i,t)},t.exports.cancel=function(){u.apply(i,arguments)},t.exports.polyfill=function(){i.requestAnimationFrame=o,i.cancelAnimationFrame=u}}).call(e,function(){return this}())},function(t,e,n){(function(e){(function(){var n,s,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-i)/1e6},s=e.hrtime,n=function(){var t;return t=s(),1e9*t[0]+t[1]},i=n()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(e,n(13))},function(t,e){function n(t){return u===setTimeout?setTimeout(t,0):u.call(null,t,0)}function s(t){l===clearTimeout?clearTimeout(t):l.call(null,t)}function i(){h&&p&&(h=!1,p.length?f=p.concat(f):d=-1,f.length&&r())}function r(){if(!h){var t=n(i);h=!0;for(var e=f.length;e;){for(p=f,f=[];++d<e;)p&&p[d].run();d=-1,e=f.length}p=null,h=!1,s(t)}}function a(t,e){this.fun=t,this.array=e}function o(){}var u,l,c=t.exports={};!function(){try{u=setTimeout}catch(t){u=function(){throw new Error("setTimeout is not defined")}}try{l=clearTimeout}catch(t){l=function(){throw new Error("clearTimeout is not defined")}}}();var p,f=[],h=!1,d=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];f.push(new a(t,e)),1!==f.length||h||n(r)},a.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=o,c.addListener=o,c.once=o,c.off=o,c.removeListener=o,c.removeAllListeners=o,c.emit=o,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){var n,s,i;s=[];for(n in e)i=e[n],s.push(null!=t[n]?t[n]:t[n]=i);return s},s={spring:{frequency:300,friction:200,anticipationSize:0,anticipationStrength:0}},i={};i.spring=function(t){var e,i,r,a,o,u;return null==t&&(t={}),n(t,s.spring),a=Math.max(1,t.frequency/20),o=Math.pow(20,t.friction/100),u=t.anticipationSize/1e3,r=Math.max(0,u),e=function(e){var n,s,i,r,a;return n=.8,r=u/(1-u),a=0,i=(r-n*a)/(r-a),s=(n-i)/r,s*e*t.anticipationStrength/100+i},i=function(t){return Math.pow(o/10,-t)*(1-t)},function(t){var n,s,r,o,l,c,p,f;return c=t/(1-u)-u/(1-u),t<u?(f=u/(1-u)-u/(1-u),p=0/(1-u)-u/(1-u),l=Math.acos(1/e(f)),r=(Math.acos(1/e(p))-l)/(a*-u),n=e):(n=i,l=0,r=1),s=n(c),o=a*(t-u)*r+l,1-s*Math.cos(o)}};var r=i;e.easings=r,e["default"]=r}])});

},{}],2:[function(require,module,exports){
var stimulate = require('../../dist/stimulate.min').stimulate;
stimulate({
	duration: 1000,
	frame: function(){
		console.log(this.progress.ratioCompleted)
	}
});
},{"../../dist/stimulate.min":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkaXN0L3N0aW11bGF0ZS5taW4uanMiLCJpbXBvcnQtZXhhbXBsZXMvY29tbW9uanMyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcInN0aW11bGF0ZVwiLFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuc3RpbXVsYXRlPWUoKTp0LnN0aW11bGF0ZT1lKCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShzKXtpZihuW3NdKXJldHVybiBuW3NdLmV4cG9ydHM7dmFyIGk9bltzXT17ZXhwb3J0czp7fSxpZDpzLGxvYWRlZDohMX07cmV0dXJuIHRbc10uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsZSksaS5sb2FkZWQ9ITAsaS5leHBvcnRzfXZhciBuPXt9O3JldHVybiBlLm09dCxlLmM9bixlLnA9XCJcIixlKDApfShbZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDgpfSwsLCwsLCwsZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHModCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntcImRlZmF1bHRcIjp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLmNhZj1lLnJhZj1lLnNoYXJlZFRpbWluZz1lLmVhc2luZ3M9ZS5zdGltdWxhdGU9dm9pZCAwO3ZhciBpPW4oOSkscj1zKGkpLGE9bigxNCksbz1zKGEpLHU9bigxMCk7ZS5zdGltdWxhdGU9cltcImRlZmF1bHRcIl0sZS5lYXNpbmdzPW9bXCJkZWZhdWx0XCJdLGUuc2hhcmVkVGltaW5nPXUuc2hhcmVkVGltaW5nLGUucmFmPXUucmFmLGUuY2FmPXUuY2FmLGVbXCJkZWZhdWx0XCJdPXJbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e1wiZGVmYXVsdFwiOnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuU3RpbXVsYXRpb25Bc3BlY3Q9ZS5zdGltdWxhdGU9dm9pZCAwO3ZhciByPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBuPWFyZ3VtZW50c1tlXTtmb3IodmFyIHMgaW4gbilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixzKSYmKHRbc109bltzXSl9cmV0dXJuIHR9LGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBzPWVbbl07cy5lbnVtZXJhYmxlPXMuZW51bWVyYWJsZXx8ITEscy5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gcyYmKHMud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHMua2V5LHMpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHMpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHMmJnQoZSxzKSxlfX0oKSxvPW4oMTApLHU9cyhvKSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPD0xfHx2b2lkIDA9PT1hcmd1bWVudHNbMV0/XCJyb290XCI6YXJndW1lbnRzWzFdLHM9YXJndW1lbnRzWzJdO2kodGhpcyx0KSx0aGlzLnBhcmVudD1zLHRoaXMuZGVidWc9bix0aGlzLm9wdGlvbnM9ZSx0aGlzLmluaXQoKX1yZXR1cm4gYSh0LFt7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7dGhpcy5hc3BlY3RzPXt9LHRoaXMucGVyc2lzdGVkU2V0dGluZ3N8fCh0aGlzLnBlcnNpc3RlZFNldHRpbmdzPXt9KSx0aGlzLmluaGVyaXRhYmxlRGVmYXVsdHM9e2R1cmF0aW9uOjFlMyxkZWxheTowLGRlbGF5RXZlcnlMb29wOiExLGxvb3A6ITEsc2tpcFplcm9GcmFtZTohMCxlbmRsZXNzOiExLHJldmVyc2U6ITEsdXNlUGVyc2lzdGVkU2V0dGluZ3M6ITF9LHRoaXMuZGVmYXVsdFNldHRpbmdzPXtkZWxheUFkZHNQYXJlbnREZWxheTohMSxmcm9tOjAsdG86MSxlYXNpbmc6bnVsbCxhc3BlY3RzOnRoaXMuYXNwZWN0cyxmcmFtZTpudWxsLGNoYWluZWRTdG9wOiEwfSx0aGlzLnNldHRpbmdzPXIoe30sdGhpcy5kZWZhdWx0U2V0dGluZ3MsdGhpcy5vcHRpb25zKSx0aGlzLmxvb2t1cFNldHRpbmcoXCJ1c2VQZXJzaXN0ZWRTZXR0aW5nc1wiKSYmT2JqZWN0LmFzc2lnbih0aGlzLnNldHRpbmdzLHRoaXMucGVyc2lzdGVkU2V0dGluZ3MpLHRoaXMuYXNwZWN0cz10aGlzLnNldHRpbmdzLmFzcGVjdHMsdGhpcy5wYXJlbnQ/dGhpcy5hc3BlY3RUcmVlPXRoaXMucGFyZW50LmFzcGVjdFRyZWU6dGhpcy5hc3BlY3RUcmVlPXRoaXM7dmFyIHM9ISF0aGlzLmxvb2t1cFNldHRpbmcoXCJyZXZlcnNlXCIpO3RoaXMucHJldmlvdXNSZXZlcnNlU2V0dGluZz1zO3ZhciBpPXRoaXMuZ2V0UHJvZ3Jlc3NEZWZhdWx0KHMpO3RoaXMucHJvZ3Jlc3M/T2JqZWN0LmFzc2lnbih0aGlzLnByb2dyZXNzLGkpOih0aGlzLnByb2dyZXNzPWksdGhpcy5wcm9ncmVzcy5hc3BlY3RzPXt9KSx0aGlzLmN1cnJlbnRMb29wQ291bnQ9MSx0aGlzLmxhc3REZWxheVNldHRpbmdXaGlsZURlbGF5aW5nPW51bGwsdGhpcy5ydW5uaW5nPSEwLHRoaXMubmV4dFJhZklkPW51bGwsdGhpcy50aW1lc3RhbXBzPXt9LHVbXCJkZWZhdWx0XCJdLm1ha2VTdGFtcChcInN0YXJ0XCIpLHRoaXMudGltZXN0YW1wcy5zdGFydD11W1wiZGVmYXVsdFwiXS5zdGFtcHMuc3RhcnQsdGhpcy50aW1lc3RhbXBzLnJlY2VudFJhZj1udWxsLHRoaXMuaXRlcmF0ZUFzcGVjdE5hbWVzKGZ1bmN0aW9uKHMpe2U/bi5hc3BlY3RzW3NdLmluaXQoITApOihuLmFzcGVjdHNbc109bmV3IHQocih7fSxuLnNldHRpbmdzLmFzcGVjdHNbc10pLHMsbiksbi5wcm9ncmVzcy5hc3BlY3RzW3NdPW4uYXNwZWN0c1tzXS5wcm9ncmVzcyl9KTt2YXIgYT10aGlzLmxvb2t1cFNldHRpbmcoXCJza2lwWmVyb0ZyYW1lXCIpO3RoaXMucmVjdXJzZSghYSl9fSx7a2V5OlwiZ2V0Q3VtdWxhdGl2ZURlbGF5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxvb2t1cFNldHRpbmcoXCJkZWxheVwiKTtyZXR1cm4gdGhpcy5wYXJlbnQmJnRoaXMuc2V0dGluZ3MuZGVsYXlBZGRzUGFyZW50RGVsYXkmJih0Kz10aGlzLnBhcmVudC5nZXRDdW11bGF0aXZlRGVsYXkoKSksdH19LHtrZXk6XCJ1cGRhdGVTZXR0aW5nc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxvb2t1cFNldHRpbmcoXCJ1c2VQZXJzaXN0ZWRTZXR0aW5nc1wiKSYmT2JqZWN0LmFzc2lnbih0aGlzLnBlcnNpc3RlZFNldHRpbmdzLHQpLE9iamVjdC5hc3NpZ24odGhpcy5zZXR0aW5ncyx0KSx0aGlzfX0se2tleTpcImxvb2t1cFNldHRpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcy5zZXR0aW5nc1t0XSYmXCJpbmhlcml0XCIhPT10aGlzLnNldHRpbmdzW3RdP3RoaXMuc2V0dGluZ3NbdF06dGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQubG9va3VwU2V0dGluZyh0KTp0aGlzLmluaGVyaXRhYmxlRGVmYXVsdHNbdF19fSx7a2V5OlwiaXRlcmF0ZUFzcGVjdE5hbWVzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5zZXR0aW5ncy5hc3BlY3ROYW1lcz1PYmplY3Qua2V5cyh0aGlzLnNldHRpbmdzLmFzcGVjdHMpLHRoaXMuc2V0dGluZ3MuYXNwZWN0TmFtZXMuZm9yRWFjaChmdW5jdGlvbihlKXt0KGUpfSl9fSx7a2V5OlwiZ2V0UHJvZ3Jlc3NEZWZhdWx0XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQ/e3JhdGlvQ29tcGxldGVkOjEsZWFzZWRSYXRpb0NvbXBsZXRlZDoxLHR3ZWVuZWQ6dGhpcy5zZXR0aW5ncy50byxlYXNlZFR3ZWVuZWQ6dGhpcy5zZXR0aW5ncy50b306e3JhdGlvQ29tcGxldGVkOjAsZWFzZWRSYXRpb0NvbXBsZXRlZDowLHR3ZWVuZWQ6dGhpcy5zZXR0aW5ncy5mcm9tLGVhc2VkVHdlZW5lZDp0aGlzLnNldHRpbmdzLmZyb219fX0se2tleTpcImdldFR3ZWVuXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0K24qKGUtdCl9fSx7a2V5OlwiY2FsY3VsYXRlUmF0aW9cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnN0YXJ0K3QuZGVsYXksbj10LmxhdGVyLWUscz1uL3QuZHVyYXRpb247cmV0dXJuIHN9fSx7a2V5OlwicmVjdXJzZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnJ1bm5pbmcmJih0aGlzLm5leHRSYWZJZD11W1wiZGVmYXVsdFwiXS5yYWYoZnVuY3Rpb24oKXtpZihuLnJ1bm5pbmcpe24udGltZXN0YW1wcy5yZWNlbnRSYWY9dVtcImRlZmF1bHRcIl0uc3RhbXBzLnJhZix0JiYobi50aW1lc3RhbXBzLnN0YXJ0PW4udGltZXN0YW1wcy5yZWNlbnRSYWYpO3ZhciBzPSEhbi5sb29rdXBTZXR0aW5nKFwicmV2ZXJzZVwiKSxpPXM/LTE6MSxyPW4ucHJldmlvdXNSZXZlcnNlU2V0dGluZyE9PXM7bi5wcmV2aW91c1JldmVyc2VTZXR0aW5nPXMsZSYmT2JqZWN0LmFzc2lnbihuLnByb2dyZXNzLG4uZ2V0UHJvZ3Jlc3NEZWZhdWx0KHMpKTt2YXIgYT0wO2E9bnVsbCE9PW4ubGFzdERlbGF5U2V0dGluZ1doaWxlRGVsYXlpbmc/bi5sYXN0RGVsYXlTZXR0aW5nV2hpbGVEZWxheWluZzpuLmdldEN1bXVsYXRpdmVEZWxheSgpO3ZhciBvPW4ubG9va3VwU2V0dGluZyhcImR1cmF0aW9uXCIpLGw9bi5jYWxjdWxhdGVSYXRpbyh7c3RhcnQ6bi50aW1lc3RhbXBzLnN0YXJ0LGxhdGVyOm4udGltZXN0YW1wcy5yZWNlbnRSYWYsZGVsYXk6YSxkdXJhdGlvbjpvfSksYz1uLmxvb2t1cFNldHRpbmcoXCJkZWxheUV2ZXJ5TG9vcFwiKTtpZihsPjAmJmw8MSYmbnVsbD09PW4ubGFzdERlbGF5U2V0dGluZ1doaWxlRGVsYXlpbmcmJihuLmxhc3REZWxheVNldHRpbmdXaGlsZURlbGF5aW5nPWEsKCFuLmxvb2t1cFNldHRpbmcoXCJza2lwWmVyb0ZyYW1lXCIpJiZhJiZuLmN1cnJlbnRMb29wQ291bnQ8PTF8fGEmJmMmJm4uY3VycmVudExvb3BDb3VudD4xKSYmKG4udGltZXN0YW1wcy5zdGFydD1uLnRpbWVzdGFtcHMucmVjZW50UmFmLWEsbD1uLmNhbGN1bGF0ZVJhdGlvKHtzdGFydDpuLnRpbWVzdGFtcHMuc3RhcnQsbGF0ZXI6bi50aW1lc3RhbXBzLnJlY2VudFJhZixkZWxheTphLGR1cmF0aW9uOm99KSkpLHIpe251bGw9PT1uLmxhc3REZWxheVNldHRpbmdXaGlsZURlbGF5aW5nJiYobi5jdXJyZW50TG9vcENvdW50LS0sbi5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZD0taSooMSsoLWkqbi5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZCthL28pKSk7dmFyIHA9bi5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZDtzJiYocD0xLW4ucHJvZ3Jlc3MucmF0aW9Db21wbGV0ZWQpO3ZhciBmPXAqbyxoPW4udGltZXN0YW1wcy5yZWNlbnRSYWYtZjtuLnRpbWVzdGFtcHMuc3RhcnQ9aC1hLGw9bi5jYWxjdWxhdGVSYXRpbyh7c3RhcnQ6bi50aW1lc3RhbXBzLnN0YXJ0LGxhdGVyOm4udGltZXN0YW1wcy5yZWNlbnRSYWYsZGVsYXk6YSxkdXJhdGlvbjpvfSl9cyYmKGw9MS1sKTt2YXIgZD1uLmxvb2t1cFNldHRpbmcoXCJsb29wXCIpLGc9MSxtPWw8Zyx2PW4uc2V0dGluZ3MuZnJvbSx5PW4uc2V0dGluZ3MudG87cyYmKGc9MCxtPWw+Zyk7dmFyIHc9ITEsUz0hMSxrPSExLEM9bi5wcm9ncmVzcztpZihDLnJhdGlvQ29tcGxldGVkPWwsbXx8IW98fG4ubG9va3VwU2V0dGluZyhcImVuZGxlc3NcIikpbi5zZXR0aW5ncy5lYXNpbmc/Qy5lYXNlZFJhdGlvQ29tcGxldGVkPW4uc2V0dGluZ3MuZWFzaW5nKEMucmF0aW9Db21wbGV0ZWQpOkMuZWFzZWRSYXRpb0NvbXBsZXRlZD1DLnJhdGlvQ29tcGxldGVkLEMudHdlZW5lZD1uLmdldFR3ZWVuKHYseSxDLnJhdGlvQ29tcGxldGVkKSxDLmVhc2VkVHdlZW5lZD1uLmdldFR3ZWVuKHYseSxDLmVhc2VkUmF0aW9Db21wbGV0ZWQpO2Vsc2V7dmFyIGI9ZD09PSEwfHxkJiZuLmN1cnJlbnRMb29wQ291bnQ8ZDtiJiYhYz8oQy5yYXRpb0NvbXBsZXRlZD0taStsLG4udGltZXN0YW1wcy5zdGFydD1uLnRpbWVzdGFtcHMuc3RhcnQrbyxuLnNldHRpbmdzLmVhc2luZz9DLmVhc2VkUmF0aW9Db21wbGV0ZWQ9bi5zZXR0aW5ncy5lYXNpbmcoQy5yYXRpb0NvbXBsZXRlZCk6Qy5lYXNlZFJhdGlvQ29tcGxldGVkPUMucmF0aW9Db21wbGV0ZWQsQy50d2VlbmVkPW4uZ2V0VHdlZW4odix5LEMucmF0aW9Db21wbGV0ZWQpLEMuZWFzZWRUd2VlbmVkPW4uZ2V0VHdlZW4odix5LEMuZWFzZWRSYXRpb0NvbXBsZXRlZCksUz0hMCk6KEMucmF0aW9Db21wbGV0ZWQ9ZyxDLmVhc2VkUmF0aW9Db21wbGV0ZWQ9ZyxDLnR3ZWVuZWQ9eSxDLmVhc2VkVHdlZW5lZD15LHMmJihDLnR3ZWVuZWQ9dixDLmVhc2VkVHdlZW5lZD12KSksYj8obi5jdXJyZW50TG9vcENvdW50Kyssaz0hUyxuLmxhc3REZWxheVNldHRpbmdXaGlsZURlbGF5aW5nPW51bGwpOnc9ITB9dmFyIFQ9bi5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZD49MDtpZihzJiYoVD1uLnByb2dyZXNzLnJhdGlvQ29tcGxldGVkPD0xKSxuLnNldHRpbmdzLmZyYW1lJiZUKXt2YXIgUj1uLnNldHRpbmdzLmZyYW1lLmFwcGx5KG4sW24ucHJvZ3Jlc3NdKTtPYmplY3QuYXNzaWduKG4ucHJvZ3Jlc3MsUil9dz8obi5ydW5uaW5nPSExLG4uc2V0dGluZ3Mub25Db21wbGV0ZSYmbi5zZXR0aW5ncy5vbkNvbXBsZXRlLmFwcGx5KG4sW24ucHJvZ3Jlc3NdKSk6bi5yZWN1cnNlKGssayl9fSkpfX0se2tleTpcInJlc2V0QWxsXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9wKCEwKSx0aGlzLmluaXQoITApLHRoaXN9fSx7a2V5Olwic3RvcFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMucnVubmluZz0hMSx1W1wiZGVmYXVsdFwiXS5jYWYodGhpcy5uZXh0UmFmSWQpLHRoaXMuc2V0dGluZ3Mub25TdG9wJiYodHx8dGhpcy5zZXR0aW5ncy5vblN0b3AuYXBwbHkodGhpcyxbdGhpcy5wcm9ncmVzc10pKSx0aGlzLml0ZXJhdGVBc3BlY3ROYW1lcyhmdW5jdGlvbihuKXt2YXIgcz1lLmFzcGVjdHNbbl07cy5zZXR0aW5ncy5jaGFpbmVkU3RvcCYmZS5hc3BlY3RzW25dLnN0b3AodCl9KSx0aGlzfX0se2tleTpcInJlc3VtZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZighdGhpcy5ydW5uaW5nKXt1W1wiZGVmYXVsdFwiXS5tYWtlU3RhbXAoXCJzdGFydFwiKTt2YXIgZT10aGlzLmxvb2t1cFNldHRpbmcoXCJkdXJhdGlvblwiKSxuPXRoaXMubG9va3VwU2V0dGluZyhcInJldmVyc2VcIikscz10aGlzLnByb2dyZXNzLnJhdGlvQ29tcGxldGVkKmU7biYmKHM9KDEtdGhpcy5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZCkqZSksdGhpcy5sYXN0RGVsYXlTZXR0aW5nV2hpbGVEZWxheWluZyYmKHMrPXRoaXMubGFzdERlbGF5U2V0dGluZ1doaWxlRGVsYXlpbmcpLHRoaXMudGltZXN0YW1wcy5zdGFydD11W1wiZGVmYXVsdFwiXS5zdGFtcHMuc3RhcnQtcyx0aGlzLnRpbWVzdGFtcHMucmVjZW50UmFmPW51bGwsdGhpcy5ydW5uaW5nPSEwLHRoaXMuaXRlcmF0ZUFzcGVjdE5hbWVzKGZ1bmN0aW9uKGUpe3QuYXNwZWN0c1tlXS5yZXN1bWUoKX0pLHRoaXMucmVjdXJzZSgpfXJldHVybiB0aGlzfX0se2tleTpcImJpcnRoQXNwZWN0XCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdGhpcy5hc3BlY3RzW2VdJiZ0aGlzLmFzcGVjdHNbZV0uc3RvcCgpLHRoaXMuYXNwZWN0c1tlXT1uZXcgdChyKHt9LG4pLGUsdGhpcyksdGhpcy5hc3BlY3RzW2VdfX0se2tleTpcInByb2dyZXNzQXRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KFwiLlwiKSxuPWVbZS5sZW5ndGgtMV07XCJ1bmRlZmluZWRcIj09dHlwZW9mIHRoaXMucHJvZ3Jlc3Nbbl0mJihuPVwiZWFzZWRUd2VlbmVkXCIsZS5wdXNoKG4pKTt2YXIgcz10aGlzLmFzcGVjdFRyZWU7aWYodCl0cnl7ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3M9dCE9PW4/cy5hc3BlY3RzW3RdOnMucHJvZ3Jlc3NbdF19KX1jYXRjaChpKXt0aHJvdyBuZXcgRXJyb3IoXCJFcnJvcjogWW91IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFzcGVjdCBwYXRoIGZvciAucHJvZ3Jlc3NBdCgpLlwiKX1lbHNlIHM9cy5wcm9ncmVzc1tuXTtyZXR1cm4gc319LHtrZXk6XCJhc3BlY3RBdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc3BsaXQoXCIuXCIpLG49dGhpcy5hc3BlY3RUcmVlO2lmKHQpdHJ5e2UuZm9yRWFjaChmdW5jdGlvbih0KXtuPW4uYXNwZWN0c1t0XX0pfWNhdGNoKHMpe3Rocm93IG5ldyBFcnJvcihcIkVycm9yOiBZb3Ugc3BlY2lmaWVkIGFuIGludmFsaWQgYXNwZWN0IHBhdGggZm9yIC5hc3BlY3RBdCgpLlwiKX1yZXR1cm4gbn19XSksdH0oKSxjPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gbmV3KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KGwsW251bGxdLmNvbmNhdChlKSkpfTtlLnN0aW11bGF0ZT1jLGUuU3RpbXVsYXRpb25Bc3BlY3Q9bCxlW1wiZGVmYXVsdFwiXT1jfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e1wiZGVmYXVsdFwiOnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIHIoKXtyZXR1cm4gcC5yYWYuYXBwbHkocCxhcmd1bWVudHMpfWZ1bmN0aW9uIGEoKXtyZXR1cm4gcC5jYWYuYXBwbHkocCxhcmd1bWVudHMpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuY2FmPWUucmFmPWUuc2hhcmVkVGltaW5nPXZvaWQgMDt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHM9ZVtuXTtzLmVudW1lcmFibGU9cy5lbnVtZXJhYmxlfHwhMSxzLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBzJiYocy53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscy5rZXkscyl9fXJldHVybiBmdW5jdGlvbihlLG4scyl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbikscyYmdChlLHMpLGV9fSgpLHU9bigxMSksbD1zKHUpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7aSh0aGlzLHQpLHRoaXMucnVubmluZz17Y291bnQ6MCxsaW1pdDowfSx0aGlzLnN0YW1wcz17c3RhcnQ6bnVsbCxyYWY6bnVsbH0sdGhpcy5yYWZJZFJlZ2lzdHJ5PXt9fXJldHVybiBvKHQsW3trZXk6XCJtYWtlU3RhbXBcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnN0YW1wc1t0XSYmIWV8fCh0aGlzLnN0YW1wc1t0XT1EYXRlLm5vdygpKSx0aGlzLnN0YW1wc1t0XX19LHtrZXk6XCJyYWZcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMucnVubmluZy5jb3VudD90aGlzLnJ1bm5pbmcuY291bnQrKzp0aGlzLnJ1bm5pbmcuY291bnQ9MTt2YXIgbj0oMCxsW1wiZGVmYXVsdFwiXSkoZnVuY3Rpb24oKXtkZWxldGUgZS5yYWZJZFJlZ2lzdHJ5W25dLGUuc3RhbXBzLnN0YXJ0PW51bGwsZS5ydW5uaW5nLmxpbWl0fHwoZS5ydW5uaW5nLmxpbWl0PWUucnVubmluZy5jb3VudCxlLm1ha2VTdGFtcChcInJhZlwiLCEwKSxlLnJ1bm5pbmcuY291bnQ9MCksZS5ydW5uaW5nLmxpbWl0LS0sdCgpfSk7cmV0dXJuIHRoaXMucmFmSWRSZWdpc3RyeVtuXT0hMCxufX0se2tleTpcImNhZlwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QmJnRoaXMucmFmSWRSZWdpc3RyeVt0XSYmKCgwLHUuY2FuY2VsKSh0KSx0aGlzLnN0YW1wcy5zdGFydD1udWxsLHRoaXMucnVubmluZy5jb3VudC0tLGRlbGV0ZSB0aGlzLnJhZklkUmVnaXN0cnlbdF0pfX1dKSx0fSgpLHA9bmV3IGM7ZS5zaGFyZWRUaW1pbmc9cCxlLnJhZj1yLGUuY2FmPWEsZVtcImRlZmF1bHRcIl09cH0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXtmb3IodmFyIHM9bigxMiksaT1cInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P2U6d2luZG93LHI9W1wibW96XCIsXCJ3ZWJraXRcIl0sYT1cIkFuaW1hdGlvbkZyYW1lXCIsbz1pW1wicmVxdWVzdFwiK2FdLHU9aVtcImNhbmNlbFwiK2FdfHxpW1wiY2FuY2VsUmVxdWVzdFwiK2FdLGw9MDshbyYmbDxyLmxlbmd0aDtsKyspbz1pW3JbbF0rXCJSZXF1ZXN0XCIrYV0sdT1pW3JbbF0rXCJDYW5jZWxcIithXXx8aVtyW2xdK1wiQ2FuY2VsUmVxdWVzdFwiK2FdO2lmKCFvfHwhdSl7dmFyIGM9MCxwPTAsZj1bXSxoPTFlMy82MDtvPWZ1bmN0aW9uKHQpe2lmKDA9PT1mLmxlbmd0aCl7dmFyIGU9cygpLG49TWF0aC5tYXgoMCxoLShlLWMpKTtjPW4rZSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9Zi5zbGljZSgwKTtmLmxlbmd0aD0wO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKCF0W2VdLmNhbmNlbGxlZCl0cnl7dFtlXS5jYWxsYmFjayhjKX1jYXRjaChuKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgbn0sMCl9fSxNYXRoLnJvdW5kKG4pKX1yZXR1cm4gZi5wdXNoKHtoYW5kbGU6KytwLGNhbGxiYWNrOnQsY2FuY2VsbGVkOiExfSkscH0sdT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPGYubGVuZ3RoO2UrKylmW2VdLmhhbmRsZT09PXQmJihmW2VdLmNhbmNlbGxlZD0hMCl9fXQuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gby5jYWxsKGksdCl9LHQuZXhwb3J0cy5jYW5jZWw9ZnVuY3Rpb24oKXt1LmFwcGx5KGksYXJndW1lbnRzKX0sdC5leHBvcnRzLnBvbHlmaWxsPWZ1bmN0aW9uKCl7aS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9byxpLmNhbmNlbEFuaW1hdGlvbkZyYW1lPXV9fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpeyhmdW5jdGlvbigpe3ZhciBuLHMsaTtcInVuZGVmaW5lZFwiIT10eXBlb2YgcGVyZm9ybWFuY2UmJm51bGwhPT1wZXJmb3JtYW5jZSYmcGVyZm9ybWFuY2Uubm93P3QuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiBwZXJmb3JtYW5jZS5ub3coKX06XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUmJm51bGwhPT1lJiZlLmhydGltZT8odC5leHBvcnRzPWZ1bmN0aW9uKCl7cmV0dXJuKG4oKS1pKS8xZTZ9LHM9ZS5ocnRpbWUsbj1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0PXMoKSwxZTkqdFswXSt0WzFdfSxpPW4oKSk6RGF0ZS5ub3c/KHQuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLWl9LGk9RGF0ZS5ub3coKSk6KHQuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpLWl9LGk9KG5ldyBEYXRlKS5nZXRUaW1lKCkpfSkuY2FsbCh0aGlzKX0pLmNhbGwoZSxuKDEzKSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdT09PXNldFRpbWVvdXQ/c2V0VGltZW91dCh0LDApOnUuY2FsbChudWxsLHQsMCl9ZnVuY3Rpb24gcyh0KXtsPT09Y2xlYXJUaW1lb3V0P2NsZWFyVGltZW91dCh0KTpsLmNhbGwobnVsbCx0KX1mdW5jdGlvbiBpKCl7aCYmcCYmKGg9ITEscC5sZW5ndGg/Zj1wLmNvbmNhdChmKTpkPS0xLGYubGVuZ3RoJiZyKCkpfWZ1bmN0aW9uIHIoKXtpZighaCl7dmFyIHQ9bihpKTtoPSEwO2Zvcih2YXIgZT1mLmxlbmd0aDtlOyl7Zm9yKHA9ZixmPVtdOysrZDxlOylwJiZwW2RdLnJ1bigpO2Q9LTEsZT1mLmxlbmd0aH1wPW51bGwsaD0hMSxzKHQpfX1mdW5jdGlvbiBhKHQsZSl7dGhpcy5mdW49dCx0aGlzLmFycmF5PWV9ZnVuY3Rpb24gbygpe312YXIgdSxsLGM9dC5leHBvcnRzPXt9OyFmdW5jdGlvbigpe3RyeXt1PXNldFRpbWVvdXR9Y2F0Y2godCl7dT1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcInNldFRpbWVvdXQgaXMgbm90IGRlZmluZWRcIil9fXRyeXtsPWNsZWFyVGltZW91dH1jYXRjaCh0KXtsPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiY2xlYXJUaW1lb3V0IGlzIG5vdCBkZWZpbmVkXCIpfX19KCk7dmFyIHAsZj1bXSxoPSExLGQ9LTE7Yy5uZXh0VGljaz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciBzPTE7czxhcmd1bWVudHMubGVuZ3RoO3MrKyllW3MtMV09YXJndW1lbnRzW3NdO2YucHVzaChuZXcgYSh0LGUpKSwxIT09Zi5sZW5ndGh8fGh8fG4ocil9LGEucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LGMudGl0bGU9XCJicm93c2VyXCIsYy5icm93c2VyPSEwLGMuZW52PXt9LGMuYXJndj1bXSxjLnZlcnNpb249XCJcIixjLnZlcnNpb25zPXt9LGMub249byxjLmFkZExpc3RlbmVyPW8sYy5vbmNlPW8sYy5vZmY9byxjLnJlbW92ZUxpc3RlbmVyPW8sYy5yZW1vdmVBbGxMaXN0ZW5lcnM9byxjLmVtaXQ9byxjLmJpbmRpbmc9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9LGMuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9LGMuY2hkaXI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfSxjLnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKHQsZSl7dmFyIG4scyxpO3M9W107Zm9yKG4gaW4gZSlpPWVbbl0scy5wdXNoKG51bGwhPXRbbl0/dFtuXTp0W25dPWkpO3JldHVybiBzfSxzPXtzcHJpbmc6e2ZyZXF1ZW5jeTozMDAsZnJpY3Rpb246MjAwLGFudGljaXBhdGlvblNpemU6MCxhbnRpY2lwYXRpb25TdHJlbmd0aDowfX0saT17fTtpLnNwcmluZz1mdW5jdGlvbih0KXt2YXIgZSxpLHIsYSxvLHU7cmV0dXJuIG51bGw9PXQmJih0PXt9KSxuKHQscy5zcHJpbmcpLGE9TWF0aC5tYXgoMSx0LmZyZXF1ZW5jeS8yMCksbz1NYXRoLnBvdygyMCx0LmZyaWN0aW9uLzEwMCksdT10LmFudGljaXBhdGlvblNpemUvMWUzLHI9TWF0aC5tYXgoMCx1KSxlPWZ1bmN0aW9uKGUpe3ZhciBuLHMsaSxyLGE7cmV0dXJuIG49Ljgscj11LygxLXUpLGE9MCxpPShyLW4qYSkvKHItYSkscz0obi1pKS9yLHMqZSp0LmFudGljaXBhdGlvblN0cmVuZ3RoLzEwMCtpfSxpPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnBvdyhvLzEwLC10KSooMS10KX0sZnVuY3Rpb24odCl7dmFyIG4scyxyLG8sbCxjLHAsZjtyZXR1cm4gYz10LygxLXUpLXUvKDEtdSksdDx1PyhmPXUvKDEtdSktdS8oMS11KSxwPTAvKDEtdSktdS8oMS11KSxsPU1hdGguYWNvcygxL2UoZikpLHI9KE1hdGguYWNvcygxL2UocCkpLWwpLyhhKi11KSxuPWUpOihuPWksbD0wLHI9MSkscz1uKGMpLG89YSoodC11KSpyK2wsMS1zKk1hdGguY29zKG8pfX07dmFyIHI9aTtlLmVhc2luZ3M9cixlW1wiZGVmYXVsdFwiXT1yfV0pfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGltdWxhdGUubWluLmpzLm1hcCIsInZhciBzdGltdWxhdGUgPSByZXF1aXJlKCcuLi8uLi9kaXN0L3N0aW11bGF0ZS5taW4nKS5zdGltdWxhdGU7XG5zdGltdWxhdGUoe1xuXHRkdXJhdGlvbjogMTAwMCxcblx0ZnJhbWU6IGZ1bmN0aW9uKCl7XG5cdFx0Y29uc29sZS5sb2codGhpcy5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZClcblx0fVxufSk7Il19
