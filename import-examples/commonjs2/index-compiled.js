(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("stimulate",[],e):"object"==typeof exports?exports.stimulate=e():t.stimulate=e()}(this,function(){return function(t){function e(n){if(s[n])return s[n].exports;var i=s[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var s={};return e.m=t,e.c=s,e.p="",e(0)}([function(t,e,s){t.exports=s(8)},,,,,,,,function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.caf=e.raf=e.sharedTiming=e.easings=e.stimulate=void 0;var i=s(9),a=n(i),r=s(12),o=n(r),u=s(10);e.stimulate=a["default"],e.easings=o["default"],e.sharedTiming=u.sharedTiming,e.raf=u.raf,e.caf=u.caf,e["default"]=a["default"]},function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.StimulationAspect=e.stimulate=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},r=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}(),o=s(10),u=n(o),l=function(){function t(e){var s=arguments.length<=1||void 0===arguments[1]?"root":arguments[1],n=arguments[2];i(this,t),this.parent=n,this.debug=s,this.options=e,this.init()}return r(t,[{key:"init",value:function(e){var s=this;this.aspects={},this.persistedSettings||(this.persistedSettings={}),this.inheritableDefaults={duration:1e3,delay:0,delayEveryLoop:!1,loop:!1,skipZeroFrame:!0,endless:!1,reverse:!1,usePersistedSettings:!1},this.defaultSettings={delayAddsParentDelay:!1,from:0,to:1,easing:null,aspects:this.aspects,frame:null,chainedStop:!0},this.settings=a({},this.defaultSettings,this.options),this.lookupSetting("usePersistedSettings")&&Object.assign(this.settings,this.persistedSettings),this.aspects=this.settings.aspects,this.parent?this.aspectTree=this.parent.aspectTree:this.aspectTree=this;var n=!!this.lookupSetting("reverse");this.previousReverseSetting=n;var i=this.getProgressDefault(n);this.progress?Object.assign(this.progress,i):(this.progress=i,this.progress.aspects={}),this.currentLoopCount=1,this.lastDelaySettingWhileDelaying=null,this.running=!0,this.nextRafId=null,this.timestamps={},u["default"].makeStamp("start"),this.timestamps.start=u["default"].stamps.start,this.timestamps.recentRaf=null,this.frameCount=0,this.iterateAspectNames(function(n){e?s.aspects[n].init(!0):(s.aspects[n]=new t(a({},s.settings.aspects[n]),n,s),s.progress.aspects[n]=s.aspects[n].progress)});var r=this.lookupSetting("skipZeroFrame");this.recurse(!r)}},{key:"getCumulativeDelay",value:function(){var t=this.lookupSetting("delay");return this.parent&&this.settings.delayAddsParentDelay&&(t+=this.parent.getCumulativeDelay()),t}},{key:"updateSettings",value:function(t){return this.lookupSetting("usePersistedSettings")&&Object.assign(this.persistedSettings,t),Object.assign(this.settings,t),this}},{key:"lookupSetting",value:function(t){return"undefined"!=typeof this.settings[t]&&"inherit"!==this.settings[t]?this.settings[t]:this.parent?this.parent.lookupSetting(t):this.inheritableDefaults[t]}},{key:"iterateAspectNames",value:function(t){this.settings.aspectNames=Object.keys(this.settings.aspects),this.settings.aspectNames.forEach(function(e){t(e)})}},{key:"getProgressDefault",value:function(t){return t?{ratioCompleted:1,easedRatioCompleted:1,tweened:this.settings.to,easedTweened:this.settings.to}:{ratioCompleted:0,easedRatioCompleted:0,tweened:this.settings.from,easedTweened:this.settings.from}}},{key:"getTween",value:function(t,e,s){return t+s*(e-t)}},{key:"calculateRatio",value:function(t){var e=t.start+t.delay,s=t.later-e,n=s/t.duration;return n}},{key:"recurse",value:function(t,e){var s=this;this.running&&(this.nextRafId=u["default"].raf(function(){if(s.running){s.timestamps.recentRaf=u["default"].stamps.raf,t&&(s.timestamps.start=s.timestamps.recentRaf);var n=!!s.lookupSetting("reverse"),i=n?-1:1,a=s.previousReverseSetting!==n;s.previousReverseSetting=n,e&&Object.assign(s.progress,s.getProgressDefault(n));var r=0;r=null!==s.lastDelaySettingWhileDelaying?s.lastDelaySettingWhileDelaying:s.getCumulativeDelay();var o=s.lookupSetting("duration"),l=s.calculateRatio({start:s.timestamps.start,later:s.timestamps.recentRaf,delay:r,duration:o}),p=s.lookupSetting("delayEveryLoop");if(l>0&&l<1&&null===s.lastDelaySettingWhileDelaying&&(s.lastDelaySettingWhileDelaying=r,(!s.lookupSetting("skipZeroFrame")&&r&&s.currentLoopCount<=1||r&&p&&s.currentLoopCount>1)&&(s.timestamps.start=s.timestamps.recentRaf-r,l=s.calculateRatio({start:s.timestamps.start,later:s.timestamps.recentRaf,delay:r,duration:o}))),a){null===s.lastDelaySettingWhileDelaying&&(s.currentLoopCount--,s.progress.ratioCompleted=-i*(1+(-i*s.progress.ratioCompleted+r/o)));var c=s.progress.ratioCompleted;n&&(c=1-s.progress.ratioCompleted);var f=c*o,h=s.timestamps.recentRaf-f;s.timestamps.start=h-r,l=s.calculateRatio({start:s.timestamps.start,later:s.timestamps.recentRaf,delay:r,duration:o})}n&&(l=1-l);var g=s.lookupSetting("loop"),d=1,m=l<d,v=s.settings.from,y=s.settings.to;n&&(d=0,m=l>d);var S=!1,k=!1,C=!1,w=s.progress;if(w.ratioCompleted=l,m||!o||s.lookupSetting("endless"))s.settings.easing?w.easedRatioCompleted=s.settings.easing(w.ratioCompleted):w.easedRatioCompleted=w.ratioCompleted,w.tweened=s.getTween(v,y,w.ratioCompleted),w.easedTweened=s.getTween(v,y,w.easedRatioCompleted);else{var R=g===!0||g&&s.currentLoopCount<g;R&&!p?(w.ratioCompleted=-i+l,s.timestamps.start=s.timestamps.start+o,s.settings.easing?w.easedRatioCompleted=s.settings.easing(w.ratioCompleted):w.easedRatioCompleted=w.ratioCompleted,w.tweened=s.getTween(v,y,w.ratioCompleted),w.easedTweened=s.getTween(v,y,w.easedRatioCompleted),k=!0):(w.ratioCompleted=d,w.easedRatioCompleted=d,w.tweened=y,w.easedTweened=y,n&&(w.tweened=v,w.easedTweened=v)),R?(s.currentLoopCount++,C=!k,s.lastDelaySettingWhileDelaying=null):S=!0}var b=s.progress.ratioCompleted>=0;if(n&&(b=s.progress.ratioCompleted<=1),s.settings.frame&&b){var D=s.settings.frame.apply(s,[s.progress]);s.frameCount++,Object.assign(s.progress,D)}S?(s.running=!1,s.settings.onComplete&&s.settings.onComplete.apply(s,[s.progress])):s.recurse(C,C)}}))}},{key:"resetAll",value:function(){return this.stop(!0),this.init(!0),this}},{key:"stop",value:function(t){var e=this;return this.running=!1,u["default"].caf(this.nextRafId),this.settings.onStop&&(t||this.settings.onStop.apply(this,[this.progress])),this.iterateAspectNames(function(s){var n=e.aspects[s];n.settings.chainedStop&&e.aspects[s].stop(t)}),this}},{key:"resume",value:function(){var t=this;if(!this.running){u["default"].makeStamp("start");var e=this.lookupSetting("duration"),s=this.lookupSetting("reverse"),n=this.progress.ratioCompleted*e;s&&(n=(1-this.progress.ratioCompleted)*e),this.lastDelaySettingWhileDelaying&&(n+=this.lastDelaySettingWhileDelaying),this.timestamps.start=u["default"].stamps.start-n,this.timestamps.recentRaf=null,this.running=!0,this.iterateAspectNames(function(e){t.aspects[e].resume()}),this.recurse()}return this}},{key:"birthAspect",value:function(e,s){return this.aspects[e]&&this.aspects[e].stop(),this.aspects[e]=new t(a({},s),e,this),this.aspects[e]}},{key:"progressAt",value:function(t){var e=t.split("."),s=e[e.length-1];"undefined"==typeof this.progress[s]&&(s="easedTweened",e.push(s));var n=this.aspectTree;if(t)try{e.forEach(function(t){n=t!==s?n.aspects[t]:n.progress[t]})}catch(i){throw new Error("Error: You specified an invalid aspect path for .progressAt().")}else n=n.progress[s];return n}},{key:"aspectAt",value:function(t){var e=t.split("."),s=this.aspectTree;if(t)try{e.forEach(function(t){s=s.aspects[t]})}catch(n){throw new Error("Error: You specified an invalid aspect path for .aspectAt().")}return s}}]),t}(),p=function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return new(Function.prototype.bind.apply(l,[null].concat(e)))};e.stimulate=p,e.StimulationAspect=l,e["default"]=p},function(t,e,s){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(){return c.raf.apply(c,arguments)}function r(){return c.caf.apply(c,arguments)}Object.defineProperty(e,"__esModule",{value:!0}),e.caf=e.raf=e.sharedTiming=void 0;var o=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}(),u=s(11),l=n(u),p=function(){function t(){i(this,t),this.running={count:0,limit:0},this.stamps={start:null,raf:null},this.rafIdRegistry={}}return o(t,[{key:"makeStamp",value:function(t,e){return this.stamps[t]&&!e||(this.stamps[t]=Date.now()),this.stamps[t]}},{key:"raf",value:function(t){var e=this;this.running.count?this.running.count++:this.running.count=1;var s=(0,l["default"])(function(){delete e.rafIdRegistry[s],e.stamps.start=null,e.running.limit||(e.running.limit=e.running.count,e.makeStamp("raf",!0),e.running.count=0),e.running.limit--,t()});return this.rafIdRegistry[s]=!0,s}},{key:"caf",value:function(t){t&&this.rafIdRegistry[t]&&((0,u.cancel)(t),this.stamps.start=null,this.running.count--,delete this.rafIdRegistry[t])}}]),t}(),c=new p;e.sharedTiming=c,e.raf=a,e.caf=r,e["default"]=c},function(t,e){(function(e){"use strict";for(var s=Date.now,n="undefined"==typeof window?e:window,i=["moz","webkit"],a="AnimationFrame",r=n["request"+a],o=n["cancel"+a]||n["cancelRequest"+a],u=0;!r&&u<i.length;u++)r=n[i[u]+"Request"+a],o=n[i[u]+"Cancel"+a]||n[i[u]+"CancelRequest"+a];if(!r||!o){var l=0,p=0,c=[],f=1e3/60;r=function(t){if(0===c.length){var e=s(),n=Math.max(10,f-(e-l));l=n+e,setTimeout(function(){var t=c.slice(0);c.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(l)}catch(s){setTimeout(function(){throw s},0)}},f)}return c.push({handle:++p,callback:t,cancelled:!1}),p},o=function(t){for(var e=0;e<c.length;e++)c[e].handle===t&&(c[e].cancelled=!0)}}t.exports=function(t){return r.call(n,t)},t.exports.cancel=function(){o.apply(n,arguments)},t.exports.polyfill=function(){n.requestAnimationFrame=r,n.cancelAnimationFrame=o}}).call(e,function(){return this}())},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t,e){var s,n,i;n=[];for(s in e)i=e[s],n.push(null!=t[s]?t[s]:t[s]=i);return n},n={spring:{frequency:300,friction:200,anticipationSize:0,anticipationStrength:0}},i={};i.spring=function(t){var e,i,a,r,o,u;return null==t&&(t={}),s(t,n.spring),r=Math.max(1,t.frequency/20),o=Math.pow(20,t.friction/100),u=t.anticipationSize/1e3,a=Math.max(0,u),e=function(e){var s,n,i,a,r;return s=.8,a=u/(1-u),r=0,i=(a-s*r)/(a-r),n=(s-i)/a,n*e*t.anticipationStrength/100+i},i=function(t){return Math.pow(o/10,-t)*(1-t)},function(t){var s,n,a,o,l,p,c,f;return p=t/(1-u)-u/(1-u),t<u?(f=u/(1-u)-u/(1-u),c=0/(1-u)-u/(1-u),l=Math.acos(1/e(f)),a=(Math.acos(1/e(c))-l)/(r*-u),s=e):(s=i,l=0,a=1),n=s(p),o=r*(t-u)*a+l,1-n*Math.cos(o)}};var a=i;e.easings=a,e["default"]=a}])});

},{}],2:[function(require,module,exports){
var stimulate = require('../../dist/stimulate.min').stimulate;
stimulate({
	duration: 1000,
	frame: function(){
		console.log(this.progress.ratioCompleted)
	}
});
},{"../../dist/stimulate.min":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkaXN0L3N0aW11bGF0ZS5taW4uanMiLCJpbXBvcnQtZXhhbXBsZXMvY29tbW9uanMyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcInN0aW11bGF0ZVwiLFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuc3RpbXVsYXRlPWUoKTp0LnN0aW11bGF0ZT1lKCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShuKXtpZihzW25dKXJldHVybiBzW25dLmV4cG9ydHM7dmFyIGk9c1tuXT17ZXhwb3J0czp7fSxpZDpuLGxvYWRlZDohMX07cmV0dXJuIHRbbl0uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsZSksaS5sb2FkZWQ9ITAsaS5leHBvcnRzfXZhciBzPXt9O3JldHVybiBlLm09dCxlLmM9cyxlLnA9XCJcIixlKDApfShbZnVuY3Rpb24odCxlLHMpe3QuZXhwb3J0cz1zKDgpfSwsLCwsLCwsZnVuY3Rpb24odCxlLHMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntcImRlZmF1bHRcIjp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLmNhZj1lLnJhZj1lLnNoYXJlZFRpbWluZz1lLmVhc2luZ3M9ZS5zdGltdWxhdGU9dm9pZCAwO3ZhciBpPXMoOSksYT1uKGkpLHI9cygxMiksbz1uKHIpLHU9cygxMCk7ZS5zdGltdWxhdGU9YVtcImRlZmF1bHRcIl0sZS5lYXNpbmdzPW9bXCJkZWZhdWx0XCJdLGUuc2hhcmVkVGltaW5nPXUuc2hhcmVkVGltaW5nLGUucmFmPXUucmFmLGUuY2FmPXUuY2FmLGVbXCJkZWZhdWx0XCJdPWFbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbih0LGUscyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e1wiZGVmYXVsdFwiOnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuU3RpbXVsYXRpb25Bc3BlY3Q9ZS5zdGltdWxhdGU9dm9pZCAwO3ZhciBhPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBzPWFyZ3VtZW50c1tlXTtmb3IodmFyIG4gaW4gcylPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocyxuKSYmKHRbbl09c1tuXSl9cmV0dXJuIHR9LHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBzPTA7czxlLmxlbmd0aDtzKyspe3ZhciBuPWVbc107bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSxzLG4pe3JldHVybiBzJiZ0KGUucHJvdG90eXBlLHMpLG4mJnQoZSxuKSxlfX0oKSxvPXMoMTApLHU9bihvKSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcz1hcmd1bWVudHMubGVuZ3RoPD0xfHx2b2lkIDA9PT1hcmd1bWVudHNbMV0/XCJyb290XCI6YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO2kodGhpcyx0KSx0aGlzLnBhcmVudD1uLHRoaXMuZGVidWc9cyx0aGlzLm9wdGlvbnM9ZSx0aGlzLmluaXQoKX1yZXR1cm4gcih0LFt7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBzPXRoaXM7dGhpcy5hc3BlY3RzPXt9LHRoaXMucGVyc2lzdGVkU2V0dGluZ3N8fCh0aGlzLnBlcnNpc3RlZFNldHRpbmdzPXt9KSx0aGlzLmluaGVyaXRhYmxlRGVmYXVsdHM9e2R1cmF0aW9uOjFlMyxkZWxheTowLGRlbGF5RXZlcnlMb29wOiExLGxvb3A6ITEsc2tpcFplcm9GcmFtZTohMCxlbmRsZXNzOiExLHJldmVyc2U6ITEsdXNlUGVyc2lzdGVkU2V0dGluZ3M6ITF9LHRoaXMuZGVmYXVsdFNldHRpbmdzPXtkZWxheUFkZHNQYXJlbnREZWxheTohMSxmcm9tOjAsdG86MSxlYXNpbmc6bnVsbCxhc3BlY3RzOnRoaXMuYXNwZWN0cyxmcmFtZTpudWxsLGNoYWluZWRTdG9wOiEwfSx0aGlzLnNldHRpbmdzPWEoe30sdGhpcy5kZWZhdWx0U2V0dGluZ3MsdGhpcy5vcHRpb25zKSx0aGlzLmxvb2t1cFNldHRpbmcoXCJ1c2VQZXJzaXN0ZWRTZXR0aW5nc1wiKSYmT2JqZWN0LmFzc2lnbih0aGlzLnNldHRpbmdzLHRoaXMucGVyc2lzdGVkU2V0dGluZ3MpLHRoaXMuYXNwZWN0cz10aGlzLnNldHRpbmdzLmFzcGVjdHMsdGhpcy5wYXJlbnQ/dGhpcy5hc3BlY3RUcmVlPXRoaXMucGFyZW50LmFzcGVjdFRyZWU6dGhpcy5hc3BlY3RUcmVlPXRoaXM7dmFyIG49ISF0aGlzLmxvb2t1cFNldHRpbmcoXCJyZXZlcnNlXCIpO3RoaXMucHJldmlvdXNSZXZlcnNlU2V0dGluZz1uO3ZhciBpPXRoaXMuZ2V0UHJvZ3Jlc3NEZWZhdWx0KG4pO3RoaXMucHJvZ3Jlc3M/T2JqZWN0LmFzc2lnbih0aGlzLnByb2dyZXNzLGkpOih0aGlzLnByb2dyZXNzPWksdGhpcy5wcm9ncmVzcy5hc3BlY3RzPXt9KSx0aGlzLmN1cnJlbnRMb29wQ291bnQ9MSx0aGlzLmxhc3REZWxheVNldHRpbmdXaGlsZURlbGF5aW5nPW51bGwsdGhpcy5ydW5uaW5nPSEwLHRoaXMubmV4dFJhZklkPW51bGwsdGhpcy50aW1lc3RhbXBzPXt9LHVbXCJkZWZhdWx0XCJdLm1ha2VTdGFtcChcInN0YXJ0XCIpLHRoaXMudGltZXN0YW1wcy5zdGFydD11W1wiZGVmYXVsdFwiXS5zdGFtcHMuc3RhcnQsdGhpcy50aW1lc3RhbXBzLnJlY2VudFJhZj1udWxsLHRoaXMuZnJhbWVDb3VudD0wLHRoaXMuaXRlcmF0ZUFzcGVjdE5hbWVzKGZ1bmN0aW9uKG4pe2U/cy5hc3BlY3RzW25dLmluaXQoITApOihzLmFzcGVjdHNbbl09bmV3IHQoYSh7fSxzLnNldHRpbmdzLmFzcGVjdHNbbl0pLG4scykscy5wcm9ncmVzcy5hc3BlY3RzW25dPXMuYXNwZWN0c1tuXS5wcm9ncmVzcyl9KTt2YXIgcj10aGlzLmxvb2t1cFNldHRpbmcoXCJza2lwWmVyb0ZyYW1lXCIpO3RoaXMucmVjdXJzZSghcil9fSx7a2V5OlwiZ2V0Q3VtdWxhdGl2ZURlbGF5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxvb2t1cFNldHRpbmcoXCJkZWxheVwiKTtyZXR1cm4gdGhpcy5wYXJlbnQmJnRoaXMuc2V0dGluZ3MuZGVsYXlBZGRzUGFyZW50RGVsYXkmJih0Kz10aGlzLnBhcmVudC5nZXRDdW11bGF0aXZlRGVsYXkoKSksdH19LHtrZXk6XCJ1cGRhdGVTZXR0aW5nc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxvb2t1cFNldHRpbmcoXCJ1c2VQZXJzaXN0ZWRTZXR0aW5nc1wiKSYmT2JqZWN0LmFzc2lnbih0aGlzLnBlcnNpc3RlZFNldHRpbmdzLHQpLE9iamVjdC5hc3NpZ24odGhpcy5zZXR0aW5ncyx0KSx0aGlzfX0se2tleTpcImxvb2t1cFNldHRpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcy5zZXR0aW5nc1t0XSYmXCJpbmhlcml0XCIhPT10aGlzLnNldHRpbmdzW3RdP3RoaXMuc2V0dGluZ3NbdF06dGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQubG9va3VwU2V0dGluZyh0KTp0aGlzLmluaGVyaXRhYmxlRGVmYXVsdHNbdF19fSx7a2V5OlwiaXRlcmF0ZUFzcGVjdE5hbWVzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5zZXR0aW5ncy5hc3BlY3ROYW1lcz1PYmplY3Qua2V5cyh0aGlzLnNldHRpbmdzLmFzcGVjdHMpLHRoaXMuc2V0dGluZ3MuYXNwZWN0TmFtZXMuZm9yRWFjaChmdW5jdGlvbihlKXt0KGUpfSl9fSx7a2V5OlwiZ2V0UHJvZ3Jlc3NEZWZhdWx0XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQ/e3JhdGlvQ29tcGxldGVkOjEsZWFzZWRSYXRpb0NvbXBsZXRlZDoxLHR3ZWVuZWQ6dGhpcy5zZXR0aW5ncy50byxlYXNlZFR3ZWVuZWQ6dGhpcy5zZXR0aW5ncy50b306e3JhdGlvQ29tcGxldGVkOjAsZWFzZWRSYXRpb0NvbXBsZXRlZDowLHR3ZWVuZWQ6dGhpcy5zZXR0aW5ncy5mcm9tLGVhc2VkVHdlZW5lZDp0aGlzLnNldHRpbmdzLmZyb219fX0se2tleTpcImdldFR3ZWVuXCIsdmFsdWU6ZnVuY3Rpb24odCxlLHMpe3JldHVybiB0K3MqKGUtdCl9fSx7a2V5OlwiY2FsY3VsYXRlUmF0aW9cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnN0YXJ0K3QuZGVsYXkscz10LmxhdGVyLWUsbj1zL3QuZHVyYXRpb247cmV0dXJuIG59fSx7a2V5OlwicmVjdXJzZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIHM9dGhpczt0aGlzLnJ1bm5pbmcmJih0aGlzLm5leHRSYWZJZD11W1wiZGVmYXVsdFwiXS5yYWYoZnVuY3Rpb24oKXtpZihzLnJ1bm5pbmcpe3MudGltZXN0YW1wcy5yZWNlbnRSYWY9dVtcImRlZmF1bHRcIl0uc3RhbXBzLnJhZix0JiYocy50aW1lc3RhbXBzLnN0YXJ0PXMudGltZXN0YW1wcy5yZWNlbnRSYWYpO3ZhciBuPSEhcy5sb29rdXBTZXR0aW5nKFwicmV2ZXJzZVwiKSxpPW4/LTE6MSxhPXMucHJldmlvdXNSZXZlcnNlU2V0dGluZyE9PW47cy5wcmV2aW91c1JldmVyc2VTZXR0aW5nPW4sZSYmT2JqZWN0LmFzc2lnbihzLnByb2dyZXNzLHMuZ2V0UHJvZ3Jlc3NEZWZhdWx0KG4pKTt2YXIgcj0wO3I9bnVsbCE9PXMubGFzdERlbGF5U2V0dGluZ1doaWxlRGVsYXlpbmc/cy5sYXN0RGVsYXlTZXR0aW5nV2hpbGVEZWxheWluZzpzLmdldEN1bXVsYXRpdmVEZWxheSgpO3ZhciBvPXMubG9va3VwU2V0dGluZyhcImR1cmF0aW9uXCIpLGw9cy5jYWxjdWxhdGVSYXRpbyh7c3RhcnQ6cy50aW1lc3RhbXBzLnN0YXJ0LGxhdGVyOnMudGltZXN0YW1wcy5yZWNlbnRSYWYsZGVsYXk6cixkdXJhdGlvbjpvfSkscD1zLmxvb2t1cFNldHRpbmcoXCJkZWxheUV2ZXJ5TG9vcFwiKTtpZihsPjAmJmw8MSYmbnVsbD09PXMubGFzdERlbGF5U2V0dGluZ1doaWxlRGVsYXlpbmcmJihzLmxhc3REZWxheVNldHRpbmdXaGlsZURlbGF5aW5nPXIsKCFzLmxvb2t1cFNldHRpbmcoXCJza2lwWmVyb0ZyYW1lXCIpJiZyJiZzLmN1cnJlbnRMb29wQ291bnQ8PTF8fHImJnAmJnMuY3VycmVudExvb3BDb3VudD4xKSYmKHMudGltZXN0YW1wcy5zdGFydD1zLnRpbWVzdGFtcHMucmVjZW50UmFmLXIsbD1zLmNhbGN1bGF0ZVJhdGlvKHtzdGFydDpzLnRpbWVzdGFtcHMuc3RhcnQsbGF0ZXI6cy50aW1lc3RhbXBzLnJlY2VudFJhZixkZWxheTpyLGR1cmF0aW9uOm99KSkpLGEpe251bGw9PT1zLmxhc3REZWxheVNldHRpbmdXaGlsZURlbGF5aW5nJiYocy5jdXJyZW50TG9vcENvdW50LS0scy5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZD0taSooMSsoLWkqcy5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZCtyL28pKSk7dmFyIGM9cy5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZDtuJiYoYz0xLXMucHJvZ3Jlc3MucmF0aW9Db21wbGV0ZWQpO3ZhciBmPWMqbyxoPXMudGltZXN0YW1wcy5yZWNlbnRSYWYtZjtzLnRpbWVzdGFtcHMuc3RhcnQ9aC1yLGw9cy5jYWxjdWxhdGVSYXRpbyh7c3RhcnQ6cy50aW1lc3RhbXBzLnN0YXJ0LGxhdGVyOnMudGltZXN0YW1wcy5yZWNlbnRSYWYsZGVsYXk6cixkdXJhdGlvbjpvfSl9biYmKGw9MS1sKTt2YXIgZz1zLmxvb2t1cFNldHRpbmcoXCJsb29wXCIpLGQ9MSxtPWw8ZCx2PXMuc2V0dGluZ3MuZnJvbSx5PXMuc2V0dGluZ3MudG87biYmKGQ9MCxtPWw+ZCk7dmFyIFM9ITEsaz0hMSxDPSExLHc9cy5wcm9ncmVzcztpZih3LnJhdGlvQ29tcGxldGVkPWwsbXx8IW98fHMubG9va3VwU2V0dGluZyhcImVuZGxlc3NcIikpcy5zZXR0aW5ncy5lYXNpbmc/dy5lYXNlZFJhdGlvQ29tcGxldGVkPXMuc2V0dGluZ3MuZWFzaW5nKHcucmF0aW9Db21wbGV0ZWQpOncuZWFzZWRSYXRpb0NvbXBsZXRlZD13LnJhdGlvQ29tcGxldGVkLHcudHdlZW5lZD1zLmdldFR3ZWVuKHYseSx3LnJhdGlvQ29tcGxldGVkKSx3LmVhc2VkVHdlZW5lZD1zLmdldFR3ZWVuKHYseSx3LmVhc2VkUmF0aW9Db21wbGV0ZWQpO2Vsc2V7dmFyIFI9Zz09PSEwfHxnJiZzLmN1cnJlbnRMb29wQ291bnQ8ZztSJiYhcD8ody5yYXRpb0NvbXBsZXRlZD0taStsLHMudGltZXN0YW1wcy5zdGFydD1zLnRpbWVzdGFtcHMuc3RhcnQrbyxzLnNldHRpbmdzLmVhc2luZz93LmVhc2VkUmF0aW9Db21wbGV0ZWQ9cy5zZXR0aW5ncy5lYXNpbmcody5yYXRpb0NvbXBsZXRlZCk6dy5lYXNlZFJhdGlvQ29tcGxldGVkPXcucmF0aW9Db21wbGV0ZWQsdy50d2VlbmVkPXMuZ2V0VHdlZW4odix5LHcucmF0aW9Db21wbGV0ZWQpLHcuZWFzZWRUd2VlbmVkPXMuZ2V0VHdlZW4odix5LHcuZWFzZWRSYXRpb0NvbXBsZXRlZCksaz0hMCk6KHcucmF0aW9Db21wbGV0ZWQ9ZCx3LmVhc2VkUmF0aW9Db21wbGV0ZWQ9ZCx3LnR3ZWVuZWQ9eSx3LmVhc2VkVHdlZW5lZD15LG4mJih3LnR3ZWVuZWQ9dix3LmVhc2VkVHdlZW5lZD12KSksUj8ocy5jdXJyZW50TG9vcENvdW50KyssQz0hayxzLmxhc3REZWxheVNldHRpbmdXaGlsZURlbGF5aW5nPW51bGwpOlM9ITB9dmFyIGI9cy5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZD49MDtpZihuJiYoYj1zLnByb2dyZXNzLnJhdGlvQ29tcGxldGVkPD0xKSxzLnNldHRpbmdzLmZyYW1lJiZiKXt2YXIgRD1zLnNldHRpbmdzLmZyYW1lLmFwcGx5KHMsW3MucHJvZ3Jlc3NdKTtzLmZyYW1lQ291bnQrKyxPYmplY3QuYXNzaWduKHMucHJvZ3Jlc3MsRCl9Uz8ocy5ydW5uaW5nPSExLHMuc2V0dGluZ3Mub25Db21wbGV0ZSYmcy5zZXR0aW5ncy5vbkNvbXBsZXRlLmFwcGx5KHMsW3MucHJvZ3Jlc3NdKSk6cy5yZWN1cnNlKEMsQyl9fSkpfX0se2tleTpcInJlc2V0QWxsXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9wKCEwKSx0aGlzLmluaXQoITApLHRoaXN9fSx7a2V5Olwic3RvcFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMucnVubmluZz0hMSx1W1wiZGVmYXVsdFwiXS5jYWYodGhpcy5uZXh0UmFmSWQpLHRoaXMuc2V0dGluZ3Mub25TdG9wJiYodHx8dGhpcy5zZXR0aW5ncy5vblN0b3AuYXBwbHkodGhpcyxbdGhpcy5wcm9ncmVzc10pKSx0aGlzLml0ZXJhdGVBc3BlY3ROYW1lcyhmdW5jdGlvbihzKXt2YXIgbj1lLmFzcGVjdHNbc107bi5zZXR0aW5ncy5jaGFpbmVkU3RvcCYmZS5hc3BlY3RzW3NdLnN0b3AodCl9KSx0aGlzfX0se2tleTpcInJlc3VtZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZighdGhpcy5ydW5uaW5nKXt1W1wiZGVmYXVsdFwiXS5tYWtlU3RhbXAoXCJzdGFydFwiKTt2YXIgZT10aGlzLmxvb2t1cFNldHRpbmcoXCJkdXJhdGlvblwiKSxzPXRoaXMubG9va3VwU2V0dGluZyhcInJldmVyc2VcIiksbj10aGlzLnByb2dyZXNzLnJhdGlvQ29tcGxldGVkKmU7cyYmKG49KDEtdGhpcy5wcm9ncmVzcy5yYXRpb0NvbXBsZXRlZCkqZSksdGhpcy5sYXN0RGVsYXlTZXR0aW5nV2hpbGVEZWxheWluZyYmKG4rPXRoaXMubGFzdERlbGF5U2V0dGluZ1doaWxlRGVsYXlpbmcpLHRoaXMudGltZXN0YW1wcy5zdGFydD11W1wiZGVmYXVsdFwiXS5zdGFtcHMuc3RhcnQtbix0aGlzLnRpbWVzdGFtcHMucmVjZW50UmFmPW51bGwsdGhpcy5ydW5uaW5nPSEwLHRoaXMuaXRlcmF0ZUFzcGVjdE5hbWVzKGZ1bmN0aW9uKGUpe3QuYXNwZWN0c1tlXS5yZXN1bWUoKX0pLHRoaXMucmVjdXJzZSgpfXJldHVybiB0aGlzfX0se2tleTpcImJpcnRoQXNwZWN0XCIsdmFsdWU6ZnVuY3Rpb24oZSxzKXtyZXR1cm4gdGhpcy5hc3BlY3RzW2VdJiZ0aGlzLmFzcGVjdHNbZV0uc3RvcCgpLHRoaXMuYXNwZWN0c1tlXT1uZXcgdChhKHt9LHMpLGUsdGhpcyksdGhpcy5hc3BlY3RzW2VdfX0se2tleTpcInByb2dyZXNzQXRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KFwiLlwiKSxzPWVbZS5sZW5ndGgtMV07XCJ1bmRlZmluZWRcIj09dHlwZW9mIHRoaXMucHJvZ3Jlc3Nbc10mJihzPVwiZWFzZWRUd2VlbmVkXCIsZS5wdXNoKHMpKTt2YXIgbj10aGlzLmFzcGVjdFRyZWU7aWYodCl0cnl7ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe249dCE9PXM/bi5hc3BlY3RzW3RdOm4ucHJvZ3Jlc3NbdF19KX1jYXRjaChpKXt0aHJvdyBuZXcgRXJyb3IoXCJFcnJvcjogWW91IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFzcGVjdCBwYXRoIGZvciAucHJvZ3Jlc3NBdCgpLlwiKX1lbHNlIG49bi5wcm9ncmVzc1tzXTtyZXR1cm4gbn19LHtrZXk6XCJhc3BlY3RBdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc3BsaXQoXCIuXCIpLHM9dGhpcy5hc3BlY3RUcmVlO2lmKHQpdHJ5e2UuZm9yRWFjaChmdW5jdGlvbih0KXtzPXMuYXNwZWN0c1t0XX0pfWNhdGNoKG4pe3Rocm93IG5ldyBFcnJvcihcIkVycm9yOiBZb3Ugc3BlY2lmaWVkIGFuIGludmFsaWQgYXNwZWN0IHBhdGggZm9yIC5hc3BlY3RBdCgpLlwiKX1yZXR1cm4gc319XSksdH0oKSxwPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxzPTA7czx0O3MrKyllW3NdPWFyZ3VtZW50c1tzXTtyZXR1cm4gbmV3KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KGwsW251bGxdLmNvbmNhdChlKSkpfTtlLnN0aW11bGF0ZT1wLGUuU3RpbXVsYXRpb25Bc3BlY3Q9bCxlW1wiZGVmYXVsdFwiXT1wfSxmdW5jdGlvbih0LGUscyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e1wiZGVmYXVsdFwiOnR9fWZ1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGEoKXtyZXR1cm4gYy5yYWYuYXBwbHkoYyxhcmd1bWVudHMpfWZ1bmN0aW9uIHIoKXtyZXR1cm4gYy5jYWYuYXBwbHkoYyxhcmd1bWVudHMpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuY2FmPWUucmFmPWUuc2hhcmVkVGltaW5nPXZvaWQgMDt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIHM9MDtzPGUubGVuZ3RoO3MrKyl7dmFyIG49ZVtzXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHMsbil7cmV0dXJuIHMmJnQoZS5wcm90b3R5cGUscyksbiYmdChlLG4pLGV9fSgpLHU9cygxMSksbD1uKHUpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7aSh0aGlzLHQpLHRoaXMucnVubmluZz17Y291bnQ6MCxsaW1pdDowfSx0aGlzLnN0YW1wcz17c3RhcnQ6bnVsbCxyYWY6bnVsbH0sdGhpcy5yYWZJZFJlZ2lzdHJ5PXt9fXJldHVybiBvKHQsW3trZXk6XCJtYWtlU3RhbXBcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnN0YW1wc1t0XSYmIWV8fCh0aGlzLnN0YW1wc1t0XT1EYXRlLm5vdygpKSx0aGlzLnN0YW1wc1t0XX19LHtrZXk6XCJyYWZcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMucnVubmluZy5jb3VudD90aGlzLnJ1bm5pbmcuY291bnQrKzp0aGlzLnJ1bm5pbmcuY291bnQ9MTt2YXIgcz0oMCxsW1wiZGVmYXVsdFwiXSkoZnVuY3Rpb24oKXtkZWxldGUgZS5yYWZJZFJlZ2lzdHJ5W3NdLGUuc3RhbXBzLnN0YXJ0PW51bGwsZS5ydW5uaW5nLmxpbWl0fHwoZS5ydW5uaW5nLmxpbWl0PWUucnVubmluZy5jb3VudCxlLm1ha2VTdGFtcChcInJhZlwiLCEwKSxlLnJ1bm5pbmcuY291bnQ9MCksZS5ydW5uaW5nLmxpbWl0LS0sdCgpfSk7cmV0dXJuIHRoaXMucmFmSWRSZWdpc3RyeVtzXT0hMCxzfX0se2tleTpcImNhZlwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QmJnRoaXMucmFmSWRSZWdpc3RyeVt0XSYmKCgwLHUuY2FuY2VsKSh0KSx0aGlzLnN0YW1wcy5zdGFydD1udWxsLHRoaXMucnVubmluZy5jb3VudC0tLGRlbGV0ZSB0aGlzLnJhZklkUmVnaXN0cnlbdF0pfX1dKSx0fSgpLGM9bmV3IHA7ZS5zaGFyZWRUaW1pbmc9YyxlLnJhZj1hLGUuY2FmPXIsZVtcImRlZmF1bHRcIl09Y30sZnVuY3Rpb24odCxlKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7Zm9yKHZhciBzPURhdGUubm93LG49XCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdz9lOndpbmRvdyxpPVtcIm1velwiLFwid2Via2l0XCJdLGE9XCJBbmltYXRpb25GcmFtZVwiLHI9bltcInJlcXVlc3RcIithXSxvPW5bXCJjYW5jZWxcIithXXx8bltcImNhbmNlbFJlcXVlc3RcIithXSx1PTA7IXImJnU8aS5sZW5ndGg7dSsrKXI9bltpW3VdK1wiUmVxdWVzdFwiK2FdLG89bltpW3VdK1wiQ2FuY2VsXCIrYV18fG5baVt1XStcIkNhbmNlbFJlcXVlc3RcIithXTtpZighcnx8IW8pe3ZhciBsPTAscD0wLGM9W10sZj0xZTMvNjA7cj1mdW5jdGlvbih0KXtpZigwPT09Yy5sZW5ndGgpe3ZhciBlPXMoKSxuPU1hdGgubWF4KDEwLGYtKGUtbCkpO2w9bitlLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdD1jLnNsaWNlKDApO2MubGVuZ3RoPTA7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRbZV0uY2FuY2VsbGVkKXRyeXt0W2VdLmNhbGxiYWNrKGwpfWNhdGNoKHMpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBzfSwwKX19LGYpfXJldHVybiBjLnB1c2goe2hhbmRsZTorK3AsY2FsbGJhY2s6dCxjYW5jZWxsZWQ6ITF9KSxwfSxvPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKWNbZV0uaGFuZGxlPT09dCYmKGNbZV0uY2FuY2VsbGVkPSEwKX19dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByLmNhbGwobix0KX0sdC5leHBvcnRzLmNhbmNlbD1mdW5jdGlvbigpe28uYXBwbHkobixhcmd1bWVudHMpfSx0LmV4cG9ydHMucG9seWZpbGw9ZnVuY3Rpb24oKXtuLnJlcXVlc3RBbmltYXRpb25GcmFtZT1yLG4uY2FuY2VsQW5pbWF0aW9uRnJhbWU9b319KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24odCxlKXt2YXIgcyxuLGk7bj1bXTtmb3IocyBpbiBlKWk9ZVtzXSxuLnB1c2gobnVsbCE9dFtzXT90W3NdOnRbc109aSk7cmV0dXJuIG59LG49e3NwcmluZzp7ZnJlcXVlbmN5OjMwMCxmcmljdGlvbjoyMDAsYW50aWNpcGF0aW9uU2l6ZTowLGFudGljaXBhdGlvblN0cmVuZ3RoOjB9fSxpPXt9O2kuc3ByaW5nPWZ1bmN0aW9uKHQpe3ZhciBlLGksYSxyLG8sdTtyZXR1cm4gbnVsbD09dCYmKHQ9e30pLHModCxuLnNwcmluZykscj1NYXRoLm1heCgxLHQuZnJlcXVlbmN5LzIwKSxvPU1hdGgucG93KDIwLHQuZnJpY3Rpb24vMTAwKSx1PXQuYW50aWNpcGF0aW9uU2l6ZS8xZTMsYT1NYXRoLm1heCgwLHUpLGU9ZnVuY3Rpb24oZSl7dmFyIHMsbixpLGEscjtyZXR1cm4gcz0uOCxhPXUvKDEtdSkscj0wLGk9KGEtcypyKS8oYS1yKSxuPShzLWkpL2EsbiplKnQuYW50aWNpcGF0aW9uU3RyZW5ndGgvMTAwK2l9LGk9ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KG8vMTAsLXQpKigxLXQpfSxmdW5jdGlvbih0KXt2YXIgcyxuLGEsbyxsLHAsYyxmO3JldHVybiBwPXQvKDEtdSktdS8oMS11KSx0PHU/KGY9dS8oMS11KS11LygxLXUpLGM9MC8oMS11KS11LygxLXUpLGw9TWF0aC5hY29zKDEvZShmKSksYT0oTWF0aC5hY29zKDEvZShjKSktbCkvKHIqLXUpLHM9ZSk6KHM9aSxsPTAsYT0xKSxuPXMocCksbz1yKih0LXUpKmErbCwxLW4qTWF0aC5jb3Mobyl9fTt2YXIgYT1pO2UuZWFzaW5ncz1hLGVbXCJkZWZhdWx0XCJdPWF9XSl9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0aW11bGF0ZS5taW4uanMubWFwIiwidmFyIHN0aW11bGF0ZSA9IHJlcXVpcmUoJy4uLy4uL2Rpc3Qvc3RpbXVsYXRlLm1pbicpLnN0aW11bGF0ZTtcbnN0aW11bGF0ZSh7XG5cdGR1cmF0aW9uOiAxMDAwLFxuXHRmcmFtZTogZnVuY3Rpb24oKXtcblx0XHRjb25zb2xlLmxvZyh0aGlzLnByb2dyZXNzLnJhdGlvQ29tcGxldGVkKVxuXHR9XG59KTsiXX0=
